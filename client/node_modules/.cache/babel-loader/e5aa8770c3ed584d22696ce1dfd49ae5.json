{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ekamjit singh\\\\Desktop\\\\oibsip_level3task-main\\\\pizza app\\\\client\\\\src\\\\components\\\\Checkout.jsx\",\n    _s2 = $RefreshSig$();\n\nimport React from 'react';\nimport useRazorpay from \"react-razorpay\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { createOrder } from '../actions/orderAction';\nimport { getAllStock } from '../actions/inventoryAction';\nimport { getAllStockReducer } from '../reducers/inventoryReducer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Checkout = ({\n  subTotal\n}) => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const loginState = useSelector(state => state.loginReducer);\n  const {\n    currentUser\n  } = loginState;\n  console.log(currentUser); //currentUser?window.location.href=\"/login\":console.log()\n\n  const cartState = useSelector(state => state.cartReducer);\n  const {\n    cartItems\n  } = cartState;\n  const dispatch = useDispatch();\n\n  const orderHandler = (razorpay_payment_id, cartItems, subTotal) => {\n    dispatch(createOrder(razorpay_payment_id, cartItems, subTotal));\n  };\n\n  const stockUpdateHandler = () => {\n    _s();\n\n    dispatch(getAllStock);\n    const stock = useSelector(state => getAllStockReducer);\n  };\n\n  _s(stockUpdateHandler, \"mMC5kMXE8TgZeOC0d3ObiEq1IPg=\", false, function () {\n    return [useSelector];\n  });\n\n  const Razorpay = useRazorpay();\n\n  const handlePayment = () => {\n    //const order = await createOrder(params);\n    if (currentUser == null) {\n      window.location.href = \"/login\";\n    }\n\n    const options = {\n      key: \"rzp_test_bYZoWApMjNP1Ln\",\n      amount: subTotal * 100,\n      currency: \"INR\",\n      name: \"Pizza Shop\",\n      description: \"Test Transaction\",\n      image: \"../../images/logo.png\",\n      //order_id: \"12345\",\n      handler: res => {\n        orderHandler(res.razorpay_payment_id, cartItems, subTotal);\n        stockUpdateHandler();\n      },\n      prefill: {\n        name: currentUser.name,\n        email: currentUser.email,\n        contact: \"\"\n      },\n      notes: {},\n      theme: {\n        color: \"#3399cc\"\n      }\n    };\n    const rzpay = new Razorpay(options);\n    rzpay.open();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handlePayment,\n      children: \"Click\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 7\n  }, this);\n};\n\n_s2(Checkout, \"KjWnVJoGLAYJdDnh3FaoKwFE1Kw=\", false, function () {\n  return [useSelector, useSelector, useDispatch, useRazorpay];\n});\n\n_c = Checkout;\nexport default Checkout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["C:/Users/ekamjit singh/Desktop/oibsip_level3task-main/pizza app/client/src/components/Checkout.jsx"],"names":["React","useRazorpay","useSelector","useDispatch","createOrder","getAllStock","getAllStockReducer","Checkout","subTotal","loginState","state","loginReducer","currentUser","console","log","cartState","cartReducer","cartItems","dispatch","orderHandler","razorpay_payment_id","stockUpdateHandler","stock","Razorpay","handlePayment","window","location","href","options","key","amount","currency","name","description","image","handler","res","prefill","email","contact","notes","theme","color","rzpay","open"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAAQC,WAAR,QAA0B,wBAA1B;AACA,SAASC,WAAT,QAA4B,4BAA5B;AACA,SAASC,kBAAT,QAAmC,8BAAnC;;;AAEA,MAAMC,QAAQ,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAgB;AAAA;;AAAA;;AAG7B,QAAMC,UAAU,GAACP,WAAW,CAAEQ,KAAD,IAASA,KAAK,CAACC,YAAhB,CAA5B;AACA,QAAM;AAACC,IAAAA;AAAD,MAAgBH,UAAtB;AACAI,EAAAA,OAAO,CAACC,GAAR,CAAYF,WAAZ,EAL6B,CAM7B;;AAGA,QAAMG,SAAS,GAACb,WAAW,CAAEQ,KAAD,IAASA,KAAK,CAACM,WAAhB,CAA3B;AACA,QAAM;AAACC,IAAAA;AAAD,MAAcF,SAApB;AAEA,QAAMG,QAAQ,GAAGf,WAAW,EAA5B;;AACA,QAAMgB,YAAY,GAAC,CAACC,mBAAD,EAAqBH,SAArB,EAA+BT,QAA/B,KAA0C;AAC3DU,IAAAA,QAAQ,CAACd,WAAW,CAACgB,mBAAD,EAAqBH,SAArB,EAA+BT,QAA/B,CAAZ,CAAR;AACD,GAFD;;AAIA,QAAMa,kBAAkB,GAAG,MAAK;AAAA;;AAC5BH,IAAAA,QAAQ,CAACb,WAAD,CAAR;AACA,UAAMiB,KAAK,GAAGpB,WAAW,CAAEQ,KAAD,IAASJ,kBAAV,CAAzB;AACH,GAHD;;AAjB6B,KAiBvBe,kBAjBuB;AAAA,YAmBXnB,WAnBW;AAAA;;AAsB7B,QAAMqB,QAAQ,GAAGtB,WAAW,EAA5B;;AACA,QAAMuB,aAAa,GAAG,MAAM;AACxB;AACA,QAAGZ,WAAW,IAAE,IAAhB,EACA;AACEa,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,QAArB;AACD;;AAGH,UAAMC,OAAO,GAAE;AAEbC,MAAAA,GAAG,EAAE,yBAFQ;AAGbC,MAAAA,MAAM,EAAEtB,QAAQ,GAAC,GAHJ;AAIbuB,MAAAA,QAAQ,EAAE,KAJG;AAKbC,MAAAA,IAAI,EAAE,YALO;AAMbC,MAAAA,WAAW,EAAE,kBANA;AAObC,MAAAA,KAAK,EAAE,uBAPM;AAQb;AACAC,MAAAA,OAAO,EAAGC,GAAD,IAAS;AAChBjB,QAAAA,YAAY,CAACiB,GAAG,CAAChB,mBAAL,EAAyBH,SAAzB,EAAmCT,QAAnC,CAAZ;AACAa,QAAAA,kBAAkB;AACnB,OAZY;AAabgB,MAAAA,OAAO,EAAE;AACPL,QAAAA,IAAI,EAAEpB,WAAW,CAACoB,IADX;AAEPM,QAAAA,KAAK,EAAE1B,WAAW,CAAC0B,KAFZ;AAGPC,QAAAA,OAAO,EAAE;AAHF,OAbI;AAkBbC,MAAAA,KAAK,EAAE,EAlBM;AAoBbC,MAAAA,KAAK,EAAE;AACLC,QAAAA,KAAK,EAAE;AADF;AApBM,KAAf;AAyBA,UAAMC,KAAK,GAAG,IAAIpB,QAAJ,CAAaK,OAAb,CAAd;AACAe,IAAAA,KAAK,CAACC,IAAN;AACD,GAnCD;;AAqCA,sBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA,2BACE;AAAQ,MAAA,OAAO,EAAEpB,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAMH,CAlED;;IAAMjB,Q;UAGeL,W,EAMDA,W,EAGCC,W,EAUAF,W;;;KAtBfM,Q;AAoEN,eAAeA,QAAf","sourcesContent":["import React from 'react'\nimport useRazorpay from \"react-razorpay\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport {createOrder} from '../actions/orderAction'\nimport { getAllStock } from '../actions/inventoryAction';\nimport { getAllStockReducer } from '../reducers/inventoryReducer';\n\nconst Checkout = ({subTotal}) => {\n    \n\n    const loginState=useSelector((state)=>state.loginReducer)\n    const {currentUser} = loginState\n    console.log(currentUser)\n    //currentUser?window.location.href=\"/login\":console.log()\n    \n\n    const cartState=useSelector((state)=>state.cartReducer)\n    const {cartItems} = cartState\n     \n    const dispatch = useDispatch()\n    const orderHandler=(razorpay_payment_id,cartItems,subTotal)=>{\n      dispatch(createOrder(razorpay_payment_id,cartItems,subTotal))\n    }\n\n    const stockUpdateHandler = () =>{\n        dispatch(getAllStock);\n        const stock = useSelector((state)=>getAllStockReducer)\n    }\n\n    const Razorpay = useRazorpay();\n    const handlePayment = () => {\n        //const order = await createOrder(params);\n        if(currentUser==null)\n        {\n          window.location.href=\"/login\"\n        }\n\n\n      const options= {\n      \n        key: \"rzp_test_bYZoWApMjNP1Ln\",\n        amount: subTotal*100,\n        currency: \"INR\",\n        name: \"Pizza Shop\",\n        description: \"Test Transaction\",\n        image: \"../../images/logo.png\",\n        //order_id: \"12345\",\n        handler: (res) => {\n          orderHandler(res.razorpay_payment_id,cartItems,subTotal);\n          stockUpdateHandler();\n        },\n        prefill: {\n          name: currentUser.name,\n          email: currentUser.email,\n          contact: \"\",\n        },\n        notes: {\n        },\n        theme: {\n          color: \"#3399cc\",\n        },\n      };\n  \n      const rzpay = new Razorpay(options);\n      rzpay.open();\n    }\n\n    return (\n      <div className=\"App\">\n        <button onClick={handlePayment}>Click</button>\n      </div>\n    );\n  \n}\n\nexport default Checkout"]},"metadata":{},"sourceType":"module"}