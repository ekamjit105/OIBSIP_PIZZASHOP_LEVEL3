{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ekamjit singh\\\\Desktop\\\\oibsip_level3task-main\\\\pizza app\\\\client\\\\src\\\\components\\\\Checkout.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport useRazorpay from \"react-razorpay\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport { createOrder } from '../actions/orderAction';\nimport { getAllStock } from '../actions/inventoryAction';\nimport { getAllStockReducer } from '../reducers/inventoryReducer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Checkout = ({\n  subTotal\n}) => {\n  _s();\n\n  const loginState = useSelector(state => state.loginReducer);\n  const {\n    currentUser\n  } = loginState;\n  console.log(currentUser); //currentUser?window.location.href=\"/login\":console.log()\n\n  const dispatch = useDispatch();\n  const cartState = useSelector(state => state.cartReducer);\n  const {\n    cartItems\n  } = cartState; //\n  //const stock = useSelector((state)=>state.getAllStockReducer);\n  //console.log(\" Recieved stock state on reaching checkout page..\",stock)    \n\n  const orderHandler = (razorpay_payment_id, cartItems, subTotal) => {\n    dispatch(createOrder(razorpay_payment_id, cartItems, subTotal));\n  };\n\n  const stockUpdateHandler = () => {\n    /*console.log(\"in handler\")  \n    stock = useSelector((state)=>state.getAllStockReducer);\n    console.log(\"Recieved stock state after order success..\",stock)\n     var s=\"** Stock Report ** The following items are now low on stock :  \";\n    \n     for(var i in stock)\n     {\n       console.log(i.name);\n       for(var j in i.varqty[0])\n       {\n         console.log(j);\n       }\n     }*/\n  };\n\n  const Razorpay = useRazorpay();\n\n  const handlePayment = () => {\n    //const order = await createOrder(params);\n    if (currentUser == null) {\n      window.location.href = \"/login\";\n    }\n\n    const options = {\n      key: \"rzp_test_bYZoWApMjNP1Ln\",\n      amount: subTotal * 100,\n      currency: \"INR\",\n      name: \"Pizza Shop\",\n      description: \"Test Transaction\",\n      image: \"../../images/logo.png\",\n      //order_id: \"12345\",\n      handler: res => {\n        dispatch(getAllStock());\n        orderHandler(res.razorpay_payment_id, cartItems, subTotal);\n        stockUpdateHandler(); // window.location.href=\"/myorders\";\n      },\n      prefill: {\n        name: currentUser.name,\n        email: currentUser.email,\n        contact: \"\"\n      },\n      notes: {},\n      theme: {\n        color: \"#3399cc\"\n      }\n    };\n    const rzpay = new Razorpay(options);\n    rzpay.open();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handlePayment,\n      children: \"Click\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 7\n  }, this);\n};\n\n_s(Checkout, \"TbpGnBFe/CqF5FWG10rskBQ51Io=\", false, function () {\n  return [useSelector, useDispatch, useSelector, useRazorpay];\n});\n\n_c = Checkout;\nexport default Checkout;\n\nvar _c;\n\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"sources":["C:/Users/ekamjit singh/Desktop/oibsip_level3task-main/pizza app/client/src/components/Checkout.jsx"],"names":["React","useRazorpay","useSelector","useDispatch","createOrder","getAllStock","getAllStockReducer","Checkout","subTotal","loginState","state","loginReducer","currentUser","console","log","dispatch","cartState","cartReducer","cartItems","orderHandler","razorpay_payment_id","stockUpdateHandler","Razorpay","handlePayment","window","location","href","options","key","amount","currency","name","description","image","handler","res","prefill","email","contact","notes","theme","color","rzpay","open"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAAQC,WAAR,QAA0B,wBAA1B;AACA,SAASC,WAAT,QAA4B,4BAA5B;AACA,SAASC,kBAAT,QAAmC,8BAAnC;;;AAEA,MAAMC,QAAQ,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAgB;AAAA;;AAG7B,QAAMC,UAAU,GAACP,WAAW,CAAEQ,KAAD,IAASA,KAAK,CAACC,YAAhB,CAA5B;AACA,QAAM;AAACC,IAAAA;AAAD,MAAgBH,UAAtB;AACAI,EAAAA,OAAO,CAACC,GAAR,CAAYF,WAAZ,EAL6B,CAM7B;;AAGA,QAAMG,QAAQ,GAAGZ,WAAW,EAA5B;AACA,QAAMa,SAAS,GAACd,WAAW,CAAEQ,KAAD,IAASA,KAAK,CAACO,WAAhB,CAA3B;AACA,QAAM;AAACC,IAAAA;AAAD,MAAcF,SAApB,CAX6B,CAY7B;AACA;AACA;;AAGA,QAAMG,YAAY,GAAC,CAACC,mBAAD,EAAqBF,SAArB,EAA+BV,QAA/B,KAA0C;AAC3DO,IAAAA,QAAQ,CAACX,WAAW,CAACgB,mBAAD,EAAqBF,SAArB,EAA+BV,QAA/B,CAAZ,CAAR;AACD,GAFD;;AAIA,QAAMa,kBAAkB,GAAG,MAAK;AAC7B;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACK,GAdD;;AAgBA,QAAMC,QAAQ,GAAGrB,WAAW,EAA5B;;AACA,QAAMsB,aAAa,GAAG,MAAM;AACxB;AAGA,QAAGX,WAAW,IAAE,IAAhB,EACA;AACEY,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAqB,QAArB;AACD;;AAGH,UAAMC,OAAO,GAAE;AAEbC,MAAAA,GAAG,EAAE,yBAFQ;AAGbC,MAAAA,MAAM,EAAErB,QAAQ,GAAC,GAHJ;AAIbsB,MAAAA,QAAQ,EAAE,KAJG;AAKbC,MAAAA,IAAI,EAAE,YALO;AAMbC,MAAAA,WAAW,EAAE,kBANA;AAObC,MAAAA,KAAK,EAAE,uBAPM;AAQb;AACAC,MAAAA,OAAO,EAAGC,GAAD,IAAS;AAChBpB,QAAAA,QAAQ,CAACV,WAAW,EAAZ,CAAR;AACAc,QAAAA,YAAY,CAACgB,GAAG,CAACf,mBAAL,EAAyBF,SAAzB,EAAmCV,QAAnC,CAAZ;AACAa,QAAAA,kBAAkB,GAHF,CAIjB;AACA,OAdY;AAebe,MAAAA,OAAO,EAAE;AACPL,QAAAA,IAAI,EAAEnB,WAAW,CAACmB,IADX;AAEPM,QAAAA,KAAK,EAAEzB,WAAW,CAACyB,KAFZ;AAGPC,QAAAA,OAAO,EAAE;AAHF,OAfI;AAoBbC,MAAAA,KAAK,EAAE,EApBM;AAsBbC,MAAAA,KAAK,EAAE;AACLC,QAAAA,KAAK,EAAE;AADF;AAtBM,KAAf;AA2BA,UAAMC,KAAK,GAAG,IAAIpB,QAAJ,CAAaK,OAAb,CAAd;AACAe,IAAAA,KAAK,CAACC,IAAN;AACD,GAvCD;;AAyCA,sBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA,2BACE;AAAQ,MAAA,OAAO,EAAEpB,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAMH,CArFD;;GAAMhB,Q;UAGeL,W,EAMAC,W,EACDD,W,EA2BCD,W;;;KArCfM,Q;AAuFN,eAAeA,QAAf","sourcesContent":["import React from 'react'\nimport useRazorpay from \"react-razorpay\";\nimport { useSelector, useDispatch } from 'react-redux';\nimport {createOrder} from '../actions/orderAction'\nimport { getAllStock } from '../actions/inventoryAction';\nimport { getAllStockReducer } from '../reducers/inventoryReducer';\n\nconst Checkout = ({subTotal}) => {\n    \n\n    const loginState=useSelector((state)=>state.loginReducer)\n    const {currentUser} = loginState\n    console.log(currentUser)\n    //currentUser?window.location.href=\"/login\":console.log()\n    \n\n    const dispatch = useDispatch()\n    const cartState=useSelector((state)=>state.cartReducer)\n    const {cartItems} = cartState\n    //\n    //const stock = useSelector((state)=>state.getAllStockReducer);\n    //console.log(\" Recieved stock state on reaching checkout page..\",stock)    \n\n\n    const orderHandler=(razorpay_payment_id,cartItems,subTotal)=>{\n      dispatch(createOrder(razorpay_payment_id,cartItems,subTotal))\n    }\n\n    const stockUpdateHandler = () =>{\n       /*console.log(\"in handler\")  \n      stock = useSelector((state)=>state.getAllStockReducer);\n      console.log(\"Recieved stock state after order success..\",stock)\n        var s=\"** Stock Report ** The following items are now low on stock :  \";\n       \n        for(var i in stock)\n        {\n          console.log(i.name);\n          for(var j in i.varqty[0])\n          {\n            console.log(j);\n          }\n        }*/\n    }\n\n    const Razorpay = useRazorpay();\n    const handlePayment = () => {\n        //const order = await createOrder(params);\n        \n        \n        if(currentUser==null)\n        {\n          window.location.href=\"/login\"\n        }\n\n\n      const options= {\n      \n        key: \"rzp_test_bYZoWApMjNP1Ln\",\n        amount: subTotal*100,\n        currency: \"INR\",\n        name: \"Pizza Shop\",\n        description: \"Test Transaction\",\n        image: \"../../images/logo.png\",\n        //order_id: \"12345\",\n        handler: (res) => {\n          dispatch(getAllStock())\n          orderHandler(res.razorpay_payment_id,cartItems,subTotal);\n          stockUpdateHandler();\n         // window.location.href=\"/myorders\";\n        },\n        prefill: {\n          name: currentUser.name,\n          email: currentUser.email,\n          contact: \"\",\n        },\n        notes: {\n        },\n        theme: {\n          color: \"#3399cc\",\n        },\n      };\n  \n      const rzpay = new Razorpay(options);\n      rzpay.open();\n    }\n\n    return (\n      <div className=\"App\">\n        <button onClick={handlePayment}>Click</button>\n      </div>\n    );\n  \n}\n\nexport default Checkout"]},"metadata":{},"sourceType":"module"}